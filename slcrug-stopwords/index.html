<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Looking at Stop Words: Why You Shouldn’t Blindly Trust Model Defaults</title>
    <meta charset="utf-8" />
    <meta name="author" content="Emil Hvitfeldt" />
    <script src="libs/header-attrs-2.5.3/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
    <script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
    <link href="libs/countdown-0.3.5/countdown.css" rel="stylesheet" />
    <script src="libs/countdown-0.3.5/countdown.js"></script>
    <link href="libs/font-awesome-5.3.1/css/fontawesome-all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, title-slide

# Looking at Stop Words: Why You Shouldn’t Blindly Trust Model Defaults
## SLC RUG December 2020
### Emil Hvitfeldt

---


background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 20%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]





<style>.orange {
  color: #EF8633;
}

.blue {
  color: #006766;
}
</style>


---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 30%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 40%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 50%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 60%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 70%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 80%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 90%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/sea.jpg")
background-size: 100%
background-position: 0% 100%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: linear-gradient( rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2) ), url("fish/sea.jpg")
background-size: 100%
background-position: 0% 100%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: linear-gradient( rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4) ), url("fish/sea.jpg")
background-size: 100%
background-position: 0% 100%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: linear-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6) ), url("fish/sea.jpg")
background-size: 100%
background-position: 0% 100%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: linear-gradient( rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8) ), url("fish/sea.jpg")
background-size: 100%
background-position: 0% 100%

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@hellocolor?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Pawel Nolbert&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

---

.center[
# What are stop words?
]

---

background-image: url("fish/fish05.png")
background-size: 60%
background-position: 35% 90%

.center[
# What are stop words?
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@davidclode?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;David Clode&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish12.png")
background-size: 40%
background-position: 0% 80%

.center[
# History
]

Hans Peter Luhn, one of the pioneers in information retrieval, is credited with coining the phrase and using the concept.

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@slinger?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Paco Joss&lt;/a&gt; on &lt;a href="https://unsplash.com/?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

# Definitions from the Web

--

&gt; "In natural language processing, useless words (data), are referred to as stop words."

&lt;br&gt;

--
 
&gt; "In computing, stop words are words that are filtered out before or after the natural language data (text) are processed."

&lt;br&gt;

--

&gt; "Stopwords are the words in any language which does not add much meaning to a sentence. They can safely be ignored without sacrificing the meaning of the sentence"

---
 
.center[
&lt;span, style = 'font-size:200px;'&gt;🤔&lt;/span&gt;
]

--

&lt;br&gt;

## this gives the illusion that stop words are easy to work with and are without problems

---

background-image: url("fish/fish14.png")
background-size: 50%
background-position: 100% 20%

# This is not the case!

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@tangzhengtao?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;zhengtao tang&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish14.png")
background-size: 50%
background-position: 100% 20%

# what is stop words really?

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@tangzhengtao?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;zhengtao tang&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

--

.pull-left[
Low information words that contribute little value to task 

&lt;br&gt;

The information of words lives on a continuum
]

---

.pull-left[
## Word information

Each rectangle represents a word in 1 document

We will illustrate the information that word carries with color.

&lt;span, style = 'color:#3E049CFF;'&gt;low information words&lt;/span&gt; 

&lt;span, style = 'color:#FCCD25FF;'&gt;high information words&lt;/span&gt;

]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-4-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

Uniform information

If this was true then it would hurt to remove any words

# 👎
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-5-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

Random information

No way to figure out which words to remove

# 👎
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-6-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

Random information

No way to figure out which words to remove

# 👎
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-7-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

High variance information
(diamonds in the rough)

Few words have a lot of information

most words have no information

# 👍
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-8-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

High variance information
(diamonds in the rough)

Few words have a lot of information

most words have no information

# 👍
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-9-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

Low variance information

Smooth transition between low and high information words

# 👍
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-10-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.pull-left[
## Word information

Low variance information

Smooth transition between low and high information words

# 👍
]

.pull-right[
&lt;img src="index_files/figure-html/unnamed-chunk-11-1.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

.center[
# Information distribution
]

&lt;img src="index_files/figure-html/unnamed-chunk-12-1.png" width="700px" style="display: block; margin: auto;" /&gt;

---

.center[
# Information distribution
]

&lt;img src="index_files/figure-html/unnamed-chunk-13-1.png" width="700px" style="display: block; margin: auto;" /&gt;

---

.center[
# Information distribution
]

&lt;img src="index_files/figure-html/unnamed-chunk-14-1.png" width="700px" style="display: block; margin: auto;" /&gt;

---

.center[
# Information distribution
]

&lt;img src="index_files/figure-html/unnamed-chunk-15-1.png" width="700px" style="display: block; margin: auto;" /&gt;

---

.center[
# Information distribution
]

&lt;img src="index_files/figure-html/unnamed-chunk-16-1.png" width="700px" style="display: block; margin: auto;" /&gt;

---

background-image: url("fish/fish06.png")
background-size: 60%
background-position: 100% 60%

# We need to strike a balance between .orange[speed] and .orange[performance]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@davidclode?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;David Clode&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish01.png")
background-size: 40%
background-position: 100% 0%

# How can we handle this

- pre-made lists
- homemade list
- Super secret master method???

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@antoinepeltier?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Antoine Peltier&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish03.png")
background-size: 40%
background-position: 10% 40%

.pull-right[
# Premade list

I have talked about stop words as if there is only a handful lists out there

And each list is well constructed
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@davidclode?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;David Clode&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

.center[
# This is WRONG
]

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;

--

.center[
# And I'll tell you why
]


---

background-image: url("fish/fish11.png")
background-size: 35%
background-position: 100% 0%

.pull-left[

## Why would you choose a premade stop word list?

### Pro
- Fast
- easy

### Con
- General
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@gaspanik?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Masaaki Komori&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

# English stop word lists

.pull-left[
- Galago (forumstop)
- EBSCOhost
- CoreNLP (Hardcoded)
- Ranks NL (Google)
- Lucene, Solr, Elastisearch
- MySQL (InnoDB)
- Ovid (Medical information services)
]

.pull-right[
- Bow (libbow, rainbow, arrow, crossbow)
- LingPipe
- Vowpal Wabbit (doc2lda)
- Text Analytics 101
- LexisNexis®
- Okapi (gsl.cacm)
- TextFixer
- DKPro
]

---

# English stop word lists

.pull-left[
- Postgres
- CoreNLP (Acronym)
- NLTK
- Spark ML lib
- MongoDB
- Quanteda
- Ranks NL (Default)
- Snowball (Original)
]

.pull-right[
- Xapian
- 99webTools
- Reuters Web of Science™
- Function Words (Cook 1988)
- Okapi (gsl.sample)
- Snowball (Expanded)
- Galago (stopStructure)
- DataScienceDojo
]

---

# English stop word lists

.pull-left[
- CoreNLP (stopwords.txt)
- OkapiFramework
- ATIRE (NCBI Medline)
- scikit-learn
- Glasgow IR
- Function Words (Gilner, Morales 2005)
- Gensim
]

.pull-right[
- Okapi (Expanded gsl.cacm)
- spaCy
- C99 and TextTiling
- Galago (inquery)
- Indri
- Onix, Lextek
- GATE (Keyphrase Extraction)
]

---

## He got candy. He shouldn't have, but he did.



### snowball (175)

<div style="display: flex; justify-content: space-between;">
<span style="color:grey;">"he"</span>
<span>"got"</span>
<span>"candy"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### SMART (571)

<div style="display: flex; justify-content: space-between;">
<span style="color:grey;">"he"</span>
<span style="color:grey;">"got"</span>
<span>"candy"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### NLTK (179)

<div style="display: flex; justify-content: space-between;">
<span style="color:grey;">"he"</span>
<span>"got"</span>
<span>"candy"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

---

## He got candy. He shouldn't have, but he did.

### ISO (1298)

<div style="display: flex; justify-content: space-between;">
<span style="color:grey;">"he"</span>
<span style="color:grey;">"got"</span>
<span>"candy"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### CoreNLP (29)

<div style="display: flex; justify-content: space-between;">
<span>"he"</span>
<span>"got"</span>
<span>"candy"</span>
<span>"he"</span>
<span>"shouldn't"</span>
<span>"have"</span>
<span>"but"</span>
<span>"he"</span>
<span>"did"</span>
</div>

### Galago (15)

<div style="display: flex; justify-content: space-between;">
<span>"he"</span>
<span style="color:grey;">"got"</span>
<span>"candy"</span>
<span>"he"</span>
<span>"shouldn't"</span>
<span>"have"</span>
<span>"but"</span>
<span>"he"</span>
<span>"did"</span>
</div>


---

background-image: url("fish/fish02.png")
background-size: 50%
background-position: 50% 90%

## But wait, what about capitalization?

This is normally done during tokenization

The way we tokenize the text will matter a lot for certain stop word lists

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@davidclode?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;David Clode&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

# No conversion to lowercase



### snowball (175)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span>"got"</span>
<span>"candy"</span>
<span>"He"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### SMART (571)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span style="color:grey;">"got"</span>
<span>"candy"</span>
<span>"He"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### NLTK (179)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span>"got"</span>
<span>"candy"</span>
<span>"He"</span>
<span style="color:grey;">"shouldn't"</span>
<span style="color:grey;">"have"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

---

# Space separated tokenizer


```
## Warning in (function (case_insensitive = FALSE, overlap = FALSE, ...) : Unknown
## option to `stri_opts_fixed`.
```

### snowball (175)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span>"got"</span>
<span>"candy."</span>
<span>"He"</span>
<span style="color:grey;">"shouldn't"</span>
<span>"have,"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span>"did."</span>
</div>

### SMART (571)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span style="color:grey;">"got"</span>
<span>"candy."</span>
<span>"He"</span>
<span style="color:grey;">"shouldn't"</span>
<span>"have,"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span>"did."</span>
</div>

### NLTK (179)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span>"got"</span>
<span>"candy."</span>
<span>"He"</span>
<span style="color:grey;">"shouldn't"</span>
<span>"have,"</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span>"did."</span>
</div>

---

# Split on non-word characters



### snowball (175)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span>"got"</span>
<span>"candy"</span>
<span>""</span>
<span>"He"</span>
<span>"shouldn"</span>
<span>"t"</span>
<span style="color:grey;">"have"</span>
<span>""</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### SMART (571)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span style="color:grey;">"got"</span>
<span>"candy"</span>
<span>""</span>
<span>"He"</span>
<span>"shouldn"</span>
<span style="color:grey;">"t"</span>
<span style="color:grey;">"have"</span>
<span>""</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

### NLTK (179)

<div style="display: flex; justify-content: space-between;">
<span>"He"</span>
<span>"got"</span>
<span>"candy"</span>
<span>""</span>
<span>"He"</span>
<span style="color:grey;">"shouldn"</span>
<span style="color:grey;">"t"</span>
<span style="color:grey;">"have"</span>
<span>""</span>
<span style="color:grey;">"but"</span>
<span style="color:grey;">"he"</span>
<span style="color:grey;">"did"</span>
</div>

---

background-image: url("fish/fish07.png")
background-size: 40%
background-position: 80% 90%

.pull-left[
## Your tokenizer and stop word list should be .orange[compatible]

stemming and lemmatization also changes the tokens

Know the order in which you should remove stop words and perform stemming
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish08.png")
background-size: 70%
background-position: 50% 90%

.center[
# LOOK AT YOUR STOP WORD LIST
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

# Non-English stop word lists

- Make sure that your list works in the target language
- Direct translation of English stop word list will not be sufficiant
- Know the target language or
- Hire consultant that knows the langauge

---

# funky stop words quiz #1

.pull-left[
- he's
- she's
- himself
- herself
]

<div class="countdown" id="timer_5fc5e0da" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">00</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">15</span></code>
</div>

---

# funky stop words quiz #1

.pull-left[
- he's
- .orange[she's]
- himself
- herself
]

.pull-right[
.orange[she's] doesn't appear in the SMART list
]

---

# funky stop words quiz #2

.pull-left[
- owl
- bee
- fify
- system1
]

<div class="countdown" id="timer_5fc5dfd1" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">00</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">15</span></code>
</div>

---

# funky stop words quiz #2

.pull-left[
- owl
- bee
- .orange[fify]
- system1
]

.pull-right[
.orange[fify] was left undetected for 3 years (2012 to 2015) in scikit-learn
]

---

# funky stop words quiz #3

.pull-left[
- substantially
- successfully
- sufficiently
- statistically
]

<div class="countdown" id="timer_5fc5e174" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">00</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">15</span></code>
</div>

---

# funky stop words quiz #3

.pull-left[
- substantially
- successfully
- sufficiently
- .orange[statistically]
]

.pull-right[
.orange[statistically] doesn't appear in the Stopwords ISO list
]

---

background-image: url("fish/fish04.png")
background-size: 70%
background-position: 80% 90%

# How did these words appear in this list?

Generation process

grammar based or frequency based

These lists are meant to be GENERAL

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@davidclode?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;David Clode&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish08.png")
background-size: 70%
background-position: 50% 90%

.center[
# LOOK AT YOUR STOP WORD LIST
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

.center[
# Stop word lists

&lt;br&gt;&lt;br&gt;

## General 

### vs

## domain specific
]

---

&lt;br&gt;&lt;br&gt;&lt;br&gt;

### Most stop word lists are made to work with "general language"

&lt;br&gt;

### domain specific stop words will work differently

---

# Home-made lists

Use a count based approach to construct a stop word list

use domain knowlegde to add words you know won't be important

Here you have a change to weed out a little of the bias

Make sure to filter by min number of words seen

---

&lt;br&gt;&lt;br&gt;&lt;br&gt;

.center[
# Secret method??
]

---

background-image: url("fish/fish09.png")
background-size: 40%
background-position: 0% 90%

.pull-right[
# Combine the two

Start with a conservative list and add words you find appropriate

best of both worlds
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

# Default stop words

What are the default stop words in tidytext, textrecipes, quanteda

--

re-exports stopwords::stopwords(). Defaults to snowball


```r
quanteda::stopwords()
```

--

Tibble with onix, SMART and snowball


```r
tidytext::stop_words
```

--

Defaults to snowball


```r
textrecipes::step_stopwords()
```

---

# defaults in modeling

--

Every modeling software/library claims to have "good defaults"

&lt;br&gt;

--

They might be different then from what you want

&lt;br&gt;

--

And they might be different then from what you THINK it did

---

# Function arguments

we have .orange[required arguments] and .orange[additional arguments]

having more required arguments will make your software less prone to surprises from the user

but will also lead to more frustration by the user if they have to fill in arguments similarly all the time

---

# glmnet

`glmnet::glmnet()` has 26 arguments, with 2 of them being required

## Only filling in required


```r
glmnet::glmnet(x_mat, y_mat)
```

---

# glmnet

`glmnet::glmnet()` has 26 arguments, with 2 of them being required

## filling in all arguments


```r
glmnet::glmnet(
  x_mat, y_mat, family = "gaussian", weights = NULL, offset = NULL, 
  lpha = 1, nlambda = 100, lambda = NULL, standardize = TRUE, 
  intercept = TRUE, thresh = 1e-07, exclude = NULL, lower.limits = -Inf, 
  upper.limits = Inf, maxit = 1e+05, standardize.response = FALSE, 
  type.multinomial = c("ungrouped"), relax = FALSE, trace.it = 0)
```

---

## In my experience most software leans towards

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

.center[
&lt;span, style = "font-size:45px;"&gt;
`length(required) &lt;&lt; length(additional)`
&lt;/span&gt;
]

---

# recipes defaults

What does `step_pca()` do?

--

PCA yes, but what does it return?

--


```r
step_pca
```

```
## function (recipe, ..., role = "predictor", trained = FALSE, num_comp = 5, 
##     threshold = NA, options = list(), res = NULL, prefix = "PC", 
##     skip = FALSE, id = rand_id("pca")) 
## {
##     if (!is_tune(threshold) &amp; !is_varying(threshold)) {
##         if (!is.na(threshold) &amp;&amp; (threshold &gt; 1 | threshold &lt;= 
##             0)) {
##             rlang::abort("`threshold` should be on (0, 1].")
##         }
##     }
##     add_step(recipe, step_pca_new(terms = ellipse_check(...), 
##         role = role, trained = trained, num_comp = num_comp, 
##         threshold = threshold, options = options, res = res, 
##         prefix = prefix, skip = skip, id = id))
## }
## &lt;bytecode: 0x7fcb82996790&gt;
## &lt;environment: namespace:recipes&gt;
```

---

# recipes defaults

Most if not all steps will work out of the box without having to set any arguments

Does this mean that the arguments ar perfect? NO! But they are a good stepping stone and building block

Once you get some that runs then you can adjust the values

---

# parsnip defaults


```r
library(parsnip)

linear_reg() %&gt;%
  fit(mpg ~ ., data = mtcars)
```

```
## Warning: Engine set to `lm`.
```

```
## parsnip model object
## 
## Fit time:  5ms 
## 
## Call:
## stats::lm(formula = mpg ~ ., data = data)
## 
## Coefficients:
## (Intercept)          cyl         disp           hp         drat           wt  
##    12.30337     -0.11144      0.01334     -0.02148      0.78711     -3.71530  
##        qsec           vs           am         gear         carb  
##     0.82104      0.31776      2.52023      0.65541     -0.19942
```

---

# parsnip defaults


```r
library(parsnip)

nearest_neighbor() %&gt;%
  fit(mpg ~ ., data = mtcars)
```

```
## Error: Please set the mode in the model specification.
```

--

Some of the modeling functions will error if a mode is not set.

--

This is another balancing act

---

background-image: url("fish/fish10.png")
background-size: 40%
background-position: 100% 90%

# Naming conventions
.pull-left[
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish10.png")
background-size: 40%
background-position: 100% 90%

# Naming conventions
.pull-left[

How do we name well established functions and arguments
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish10.png")
background-size: 40%
background-position: 100% 90%

# Naming conventions
.pull-left[

How do we name well established functions and arguments

This seems like it should be a simple problem
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

background-image: url("fish/fish10.png")
background-size: 40%
background-position: 100% 90%

# Naming conventions
.pull-left[

How do we name well established functions and arguments

This seems like it should be a simple problem

but it isn't 😢
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

### Argument names for boosted trees in R

|parsnip        |xgboost              |C5.0         |spark                               |
|:--------------|:--------------------|:------------|:-----------------------------------|
|tree_depth     |max_depth (6)        |NA           |max_depth (5)                       |
|trees          |nrounds (15)         |trials (15)  |max_iter (20)                       |
|learn_rate     |eta (0.3)            |NA           |step_size (0.1)                     |
|mtry           |colsample_bytree (1) |NA           |feature_subset_strategy (see below) |
|min_n          |min_child_weight (1) |minCases (2) |min_instances_per_node (1)          |
|loss_reduction |gamma (0)            |NA           |min_info_gain (0)                   |
|sample_size    |subsample (1)        |sample (0)   |subsampling_rate (1)                |
|stop_iter      |early_stop           |NA           |NA                                  |


---

# Miss-match between names

&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;By default, logistic regression in scikit-learn runs w L2 regularization on and defaulting to magic number C=1.0. How many millions of ML/stats/data-mining papers have been written by authors who didn&amp;#39;t report (&amp;amp; honestly didn&amp;#39;t think they were) using regularization?&lt;/p&gt;&amp;mdash; Zachary Lipton (@zacharylipton) &lt;a href="https://twitter.com/zacharylipton/status/1167298276686589953?ref_src=twsrc%5Etfw"&gt;August 30, 2019&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;

More reading here:

https://ryxcommar.com/2019/08/30/scikit-learns-defaults-are-wrong/

---

background-image: url("fish/fish13.png")
background-size: 40%
background-position: 100% 90%

# principle of least astonishment

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@pawel_czerwinski?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Paweł Czerwiński&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

--

Write software that gives the least amount of surprises

--

Use software assuming the writers don't know about the "principle of least astonishment"

---

background-image: url("fish/fish08.png")
background-size: 70%
background-position: 50% 90%

.center[
# LOOK AT YOUR STOP WORD LIST
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

# Resources

Much information in  

https://www.aclweb.org/anthology/W18-2502.pdf

Read more

https://smltar.com/stopwords.html

---

background-image: url("fish/fish08.png")
background-size: 70%
background-position: 50% 90%

.center[
# LOOK AT YOUR STOP WORD LIST
]

.footnote[
&lt;span&gt;Photo by &lt;a href="https://unsplash.com/@kyawthutun?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Kyaw Tun&lt;/a&gt; on &lt;a href="https://unsplash.com/@emilhvitfeldt/likes?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText"&gt;Unsplash&lt;/a&gt;&lt;/span&gt;
]

---

class: center, middle

# Thank you!

### <i class="fab  fa-github "></i> [EmilHvitfeldt](https://github.com/EmilHvitfeldt/)
### <i class="fab  fa-twitter "></i> [@Emil_Hvitfeldt](https://twitter.com/Emil_Hvitfeldt)
### <i class="fab  fa-linkedin "></i> [emilhvitfeldt](linkedin.com/in/emilhvitfeldt/)
### <i class="fas  fa-laptop "></i> [www.hvitfeldt.me](www.hvitfeldt.me)

Slides created via the R package [xaringan](https://github.com/yihui/xaringan).

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
